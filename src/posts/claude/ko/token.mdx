---
title: "Claude 토큰 관리법"
date: "2025-12-19"
description: "개발을 하며 claude code를 메인으로 사용하고 있었다. 하지만 매 번 토큰관리에 실패하다보니 답답해서 토큰 관리법을 정리한다."
tags: ["claude", "ai", "llm",]
thumbnail: "/post/docker/thumbnail.png"
---

## 문제 상황

개발을 진행하면서 Claude Code를 너무 잘 이용하고있다. 단 한 가지만 빼고... 토큰관리가 너무 안된다.
해보려고해도 1시간 반에서 2시간만에 다 사용해서 토큰이 refresh 될 때까지 계속 기다린다.
그 시간에 문서정리도 하고 수정했던 소스를 점검하기도 하지만 생산성을 더욱 높이기위해 토큰관리법을 찾아보고 적용해보려고 한다.

하나의 작업이 종료된 이후에 context를 주기적으로 정리해준다.

### 1.이건 다 알고있을 것 같다.

1. /clear 명령어로 컨텍스트를 초기화
2. /context 명령어로 현재 상태를 체크
- 항목중 80%가 넘었다면 clear를 진행한다.
3. /compact
4. /config 명령어를 통해 Auto-compact를 설정해두면 알아서 context를 정리해준다.

### 2.claude skills
커스텀 커맨드 vs MCP / 서브에이전트 / 스킬

커스텀 커맨드 : 매번 명령어를 통해 실행된다.
MCP, 서브에이전트, 스킬 : 자동으로 작동된다.

전통적인 방식 (커스텀 커맨드 / MCP / 서브 에이전트)
클로드 스킬은 점직전 로딩 - 필요할 때 필요한 만큼

전통적인 방식 (커스텀 커맨드 / 서브 에이전트)
- AI가 확률적으로 컨텍스트를 작성해주기 때문에 다른 답이 발생할 수 있다.

클로드 스킬의 스크립트 직접 실행한다.
- 미리 작성된 스크립트를 실행하여, 코드는 읽지 않고 실행 결과만 컨텍스트에 저장된다.

압도적인 토큰 효율
100% 동일한 결과 - 같은 스크립트 실행
AI의 비결정적 특성으로 인한 불일치 문제 해결
대규모 자동화와 반복 작업에 최적

Claude Command : 자주 쓰는 프롬프트를 저장해주는 단축키
Subagent : 특정 역할을 하는 전문가 AI
MCP : 외부 시스템 연결
Claude Skills : 특정 작업을 더 잘할 수 있게 해주는 업무 메뉴
- 서브에이전트 전문가 고용
- Claude Skills: 전문가에게 체계적인 업무 메뉴얼 공유

### Claude Code Workflow
- PRD 문서작성
- 테스트 관리도구

### Claude Code Plugin

/commit
/code-review 반복되는것들은 커스텀 커맨드로 제작한다.

/notion, supabase 등의 외부시스템 -> MCP

특정 전문지식 -> 서브 에이전트

그런데 문제가 있다.
이렇게 만든 기능들을 다른 프로젝트에서 사용하려고 한다 어떻게 해야하나 ?

일일이 정의한 기능들을 현재 프로젝트로 복사하여 사용한다.
marketplace 경로 : https://claudemarketplaces.com/

claude code의 mcp, skill. custom command 들을 공유하기 쉽게 모아둔 템플릿이다.

claude code plugin 추천 : frontend design

맥주 큐레이션 서비스 PRD무서를 docs/PRO.md 파일로 생성해줘.
plan mode 전환
PRD(Product Requirements Document)

  - Plugin: 전체 확장 패키지
  - Skills: 플러그인 안에 포함된 개별 기능 (Claude가 자동으로 사용)


팀마다 룰이 존재할텐데, 새로운 프로젝트가 시작할때마다 rule을 정해서
skill로 정의해두면 팀 별로 사용하기도 좋다.

Claude Skills
- 프롬프트 제작기능
- SubAgent 제작기능
- Claude Skills

Skill.md가 기준이다.
자동화 작업들을 skill에 작성하여 업무를 처리한다.

Claude Skills의 실제 역할
기술 규약 문서 (Technical Specification)

특정 작업을 수행할 때의 "how-to" 가이드
사용할 기술 스택, 라이브러리, 베스트 프랙티스 명시
예: "pptx 만들 때는 python-pptx 사용, 레이아웃은 이렇게, 폰트는 저렇게"

계층적 구조의 장점
Claude Skills (최상위 오케스트레이터)
├─> Sub Agent 호출 (복잡한 로직 처리)
├─> Plugin 호출 (외부 API 연동)
└─> 직접 처리 (단순 작업)
Jo가 말한 것처럼, Skill이 **"상황에 맞는 기술 선택과 워크플로우를 정의"**하고, 필요에 따라 하위 도구들을 orchestration하는 거지.


파이토치 claude skills 모음 https://discuss.pytorch.kr/t/voltagent-claude-skills-awesome-claude-skills/8122

참고경로
Claude Code Token 관리법 : https://www.youtube.com/watch?v=VbD8ITrJ6lg

---

AI에게 요청을 보내면 AI는 텍스트를 토큰 단위로 쪼개서 이해한다.

"Hello" -> 약 1개 토큰
"안녕하세요" -> 약 5개의 토큰

토큰의 크기는 고정되어 있지않음.
토크나이저가 다르기 때문에 모델에 따라서 토큰의 개수가 변견된다.

토큰은 입력 토큰, 출력 토큰으로 구성된다.
컨텍스트 윈도우란 ? : 한 번에 처리할 수 있는 클러드의 토큰 최대 사용량

입력토큰은 계속 증가가 된다. (출력은 고정이지만 입력은 그전에 보냈던 출력내용까지 참조하여 보낸다.)
-> clear를 항상 초기화 해야한다.
-> /compact : 메세지 컨텍스트를 압축한다.


정확하게 제한해서 제한한다.
간단한, 단일 파일로 ~줄 이하,  배포/테스트/빌드 제외같은 텍스트를 이용한다.
/model haiku

### 모델 관리

학습 간단한 실습 -> Haiku
복잡한 프로젝트 / 실전 개발 -> Sonnect / Opus

### 컨텍스트 관리

- /clear로 관리한다.
- 컨텍스트가 거의 찼는데 작업을 이어가고 싶을 때

### 컨텍스트 차지하는 요소 줄이기

서브에이전트, MCP, CLAUDE.md

모두 컨텍스트를 차지하므로, 정말 필요한 것만 엄선해서 사용한다.

AI 네이티브 개발자가 되려면 결국 컨텍스트를 어떻게 관리하느냐의 대한 싸움일 것이다.
